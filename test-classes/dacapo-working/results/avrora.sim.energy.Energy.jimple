public class avrora.sim.energy.Energy extends java.lang.Object implements avrora.sim.FiniteStateMachine$Probe
{
    private java.lang.String deviceName;
    private double[] ampere;
    private long[] cycles;
    private int currentMode;
    private int oldMode;
    private long lastChange;
    private static final double voltage;
    private double cycleTime;
    private avrora.sim.FiniteStateMachine stateMachine;
    private avrora.sim.clock.Clock clock;
    private avrora.sim.energy.EnergyControl energyControl;

    public void <init>(java.lang.String, double[], avrora.sim.FiniteStateMachine, avrora.sim.energy.EnergyControl)
    {
        avrora.sim.energy.Energy l0;
        java.lang.String l1;
        avrora.sim.FiniteStateMachine l3;
        avrora.sim.clock.Clock $stack5, $stack7;
        double[] l2;
        int $stack6, $stack10;
        long $stack9;
        double $stack11, $stack12;
        avrora.sim.energy.EnergyControl l4;

        l0 := @this: avrora.sim.energy.Energy;

        l1 := @parameter0: java.lang.String;

        l2 := @parameter1: double[];

        l3 := @parameter2: avrora.sim.FiniteStateMachine;

        l4 := @parameter3: avrora.sim.energy.EnergyControl;

        specialinvoke l0.<java.lang.Object: void <init>()>();

        l0.<avrora.sim.energy.Energy: java.lang.String deviceName> = l1;

        $stack5 = virtualinvoke l3.<avrora.sim.FiniteStateMachine: avrora.sim.clock.Clock getClock()>();

        l0.<avrora.sim.energy.Energy: avrora.sim.clock.Clock clock> = $stack5;

        l0.<avrora.sim.energy.Energy: double[] ampere> = l2;

        l0.<avrora.sim.energy.Energy: avrora.sim.FiniteStateMachine stateMachine> = l3;

        $stack6 = virtualinvoke l3.<avrora.sim.FiniteStateMachine: int getStartState()>();

        l0.<avrora.sim.energy.Energy: int currentMode> = $stack6;

        $stack7 = l0.<avrora.sim.energy.Energy: avrora.sim.clock.Clock clock>;

        $stack9 = virtualinvoke $stack7.<avrora.sim.clock.Clock: long getHZ()>();

        $stack10 = (int) $stack9;

        $stack11 = (double) $stack10;

        $stack12 = 1.0 / $stack11;

        l0.<avrora.sim.energy.Energy: double cycleTime> = $stack12;

        l0.<avrora.sim.energy.Energy: avrora.sim.energy.EnergyControl energyControl> = l4;

        virtualinvoke l4.<avrora.sim.energy.EnergyControl: void addConsumer(avrora.sim.energy.Energy)>(l0);

        return;
    }

    public void activate()
    {
        avrora.sim.energy.Energy l0;
        avrora.sim.FiniteStateMachine $stack2;
        double[] $stack3;
        int $stack4, $stack7, l1#1;
        long[] $stack5, $stack6, $stack8;

        l0 := @this: avrora.sim.energy.Energy;

        $stack2 = l0.<avrora.sim.energy.Energy: avrora.sim.FiniteStateMachine stateMachine>;

        virtualinvoke $stack2.<avrora.sim.FiniteStateMachine: void insertProbe(avrora.sim.FiniteStateMachine$Probe)>(l0);

        $stack3 = l0.<avrora.sim.energy.Energy: double[] ampere>;

        $stack4 = lengthof $stack3;

        $stack5 = newarray (long)[$stack4];

        l0.<avrora.sim.energy.Energy: long[] cycles> = $stack5;

        l1#1 = 0;

     label1:
        $stack6 = l0.<avrora.sim.energy.Energy: long[] cycles>;

        $stack7 = lengthof $stack6;

        if l1#1 >= $stack7 goto label2;

        $stack8 = l0.<avrora.sim.energy.Energy: long[] cycles>;

        $stack8[l1#1] = 0L;

        l1#1 = l1#1 + 1;

        goto label1;

     label2:
        return;
    }

    public void fireAfterTransition(int, int)
    {
        int l2, $stack5, $stack12, l1#1, l1#2;
        avrora.sim.energy.Energy l0;
        long[] $stack6;
        avrora.sim.clock.Clock $stack7, $stack13;
        long $stack8, $stack9, $stack10, $stack11, l3, $stack14;
        avrora.sim.energy.EnergyControl $stack15;

        l0 := @this: avrora.sim.energy.Energy;

        l1#1 := @parameter0: int;

        l2 := @parameter1: int;

        $stack5 = l0.<avrora.sim.energy.Energy: int currentMode>;

        if l2 == $stack5 goto label1;

        $stack6 = l0.<avrora.sim.energy.Energy: long[] cycles>;

        l1#2 = l0.<avrora.sim.energy.Energy: int currentMode>;

        $stack8 = $stack6[l1#2];

        $stack7 = l0.<avrora.sim.energy.Energy: avrora.sim.clock.Clock clock>;

        $stack9 = virtualinvoke $stack7.<avrora.sim.clock.Clock: long getCount()>();

        $stack10 = l0.<avrora.sim.energy.Energy: long lastChange>;

        $stack11 = $stack9 - $stack10;

        l3 = $stack8 + $stack11;

        $stack6[l1#2] = l3;

        $stack12 = l0.<avrora.sim.energy.Energy: int currentMode>;

        l0.<avrora.sim.energy.Energy: int oldMode> = $stack12;

        l0.<avrora.sim.energy.Energy: int currentMode> = l2;

        $stack13 = l0.<avrora.sim.energy.Energy: avrora.sim.clock.Clock clock>;

        $stack14 = virtualinvoke $stack13.<avrora.sim.clock.Clock: long getCount()>();

        l0.<avrora.sim.energy.Energy: long lastChange> = $stack14;

        $stack15 = l0.<avrora.sim.energy.Energy: avrora.sim.energy.EnergyControl energyControl>;

        virtualinvoke $stack15.<avrora.sim.energy.EnergyControl: void stateChange(avrora.sim.energy.Energy)>(l0);

     label1:
        return;
    }

    public void fireBeforeTransition(int, int)
    {
        avrora.sim.energy.Energy l0;
        int l1, l2;

        l0 := @this: avrora.sim.energy.Energy;

        l1 := @parameter0: int;

        l2 := @parameter1: int;

        return;
    }

    public double getConsumedEnergy(int)
    {
        avrora.sim.energy.Energy l0;
        int l1;
        long $stack3;
        double $stack4, $stack6, $stack7, $stack8, $stack9, $stack10;
        double[] $stack5;

        l0 := @this: avrora.sim.energy.Energy;

        l1 := @parameter0: int;

        $stack3 = virtualinvoke l0.<avrora.sim.energy.Energy: long getCycles(int)>(l1);

        $stack4 = (double) $stack3;

        $stack7 = 3.0 * $stack4;

        $stack5 = l0.<avrora.sim.energy.Energy: double[] ampere>;

        $stack6 = $stack5[l1];

        $stack9 = $stack7 * $stack6;

        $stack8 = l0.<avrora.sim.energy.Energy: double cycleTime>;

        $stack10 = $stack9 * $stack8;

        return $stack10;
    }

    public double getCurrentAmpere()
    {
        avrora.sim.energy.Energy l0;
        int $stack1;
        double[] $stack2;
        double $stack3;

        l0 := @this: avrora.sim.energy.Energy;

        $stack2 = l0.<avrora.sim.energy.Energy: double[] ampere>;

        $stack1 = l0.<avrora.sim.energy.Energy: int currentMode>;

        $stack3 = $stack2[$stack1];

        return $stack3;
    }

    public int getCurrentMode()
    {
        avrora.sim.energy.Energy l0;
        int $stack1;

        l0 := @this: avrora.sim.energy.Energy;

        $stack1 = l0.<avrora.sim.energy.Energy: int currentMode>;

        return $stack1;
    }

    public long getCycles(int)
    {
        avrora.sim.energy.Energy l0;
        long[] $stack4, $stack5;
        int l1, $stack6;
        avrora.sim.clock.Clock $stack7;
        long $stack8, $stack9, $stack10, l2#1;

        l0 := @this: avrora.sim.energy.Energy;

        l1 := @parameter0: int;

        $stack4 = l0.<avrora.sim.energy.Energy: long[] cycles>;

        if $stack4 != null goto label1;

        return 0L;

     label1:
        $stack5 = l0.<avrora.sim.energy.Energy: long[] cycles>;

        l2#1 = $stack5[l1];

        $stack6 = l0.<avrora.sim.energy.Energy: int currentMode>;

        if l1 != $stack6 goto label2;

        $stack7 = l0.<avrora.sim.energy.Energy: avrora.sim.clock.Clock clock>;

        $stack8 = virtualinvoke $stack7.<avrora.sim.clock.Clock: long getCount()>();

        $stack9 = l0.<avrora.sim.energy.Energy: long lastChange>;

        $stack10 = $stack8 - $stack9;

        l2#1 = l2#1 + $stack10;

     label2:
        return l2#1;
    }

    public double getModeAmpere(int)
    {
        avrora.sim.energy.Energy l0;
        int l1;
        double[] $stack2;
        double $stack3;

        l0 := @this: avrora.sim.energy.Energy;

        l1 := @parameter0: int;

        $stack2 = l0.<avrora.sim.energy.Energy: double[] ampere>;

        $stack3 = $stack2[l1];

        return $stack3;
    }

    public java.lang.String getModeName(int)
    {
        avrora.sim.energy.Energy l0;
        int l1;
        avrora.sim.FiniteStateMachine $stack2;
        java.lang.String $stack3;

        l0 := @this: avrora.sim.energy.Energy;

        l1 := @parameter0: int;

        $stack2 = l0.<avrora.sim.energy.Energy: avrora.sim.FiniteStateMachine stateMachine>;

        $stack3 = virtualinvoke $stack2.<avrora.sim.FiniteStateMachine: java.lang.String getStateName(int)>(l1);

        return $stack3;
    }

    public int getModeNumber()
    {
        avrora.sim.energy.Energy l0;
        double[] $stack1;
        int $stack2;

        l0 := @this: avrora.sim.energy.Energy;

        $stack1 = l0.<avrora.sim.energy.Energy: double[] ampere>;

        $stack2 = lengthof $stack1;

        return $stack2;
    }

    public java.lang.String getName()
    {
        avrora.sim.energy.Energy l0;
        java.lang.String $stack1;

        l0 := @this: avrora.sim.energy.Energy;

        $stack1 = l0.<avrora.sim.energy.Energy: java.lang.String deviceName>;

        return $stack1;
    }

    public double getOldAmpere()
    {
        avrora.sim.energy.Energy l0;
        int $stack1;
        double[] $stack2;
        double $stack3;

        l0 := @this: avrora.sim.energy.Energy;

        $stack2 = l0.<avrora.sim.energy.Energy: double[] ampere>;

        $stack1 = l0.<avrora.sim.energy.Energy: int oldMode>;

        $stack3 = $stack2[$stack1];

        return $stack3;
    }

    public int getOldMode()
    {
        avrora.sim.energy.Energy l0;
        int $stack1;

        l0 := @this: avrora.sim.energy.Energy;

        $stack1 = l0.<avrora.sim.energy.Energy: int oldMode>;

        return $stack1;
    }

    public double getTotalConsumedEnergy()
    {
        avrora.sim.energy.Energy l0;
        double[] $stack4;
        int $stack5, l3#2;
        double $stack6, l1#1;

        l0 := @this: avrora.sim.energy.Energy;

        l1#1 = 0.0;

        l3#2 = 0;

     label1:
        $stack4 = l0.<avrora.sim.energy.Energy: double[] ampere>;

        $stack5 = lengthof $stack4;

        if l3#2 >= $stack5 goto label2;

        $stack6 = virtualinvoke l0.<avrora.sim.energy.Energy: double getConsumedEnergy(int)>(l3#2);

        l1#1 = l1#1 + $stack6;

        l3#2 = l3#2 + 1;

        goto label1;

     label2:
        return l1#1;
    }

    public static void <clinit>()
    {
        <avrora.sim.energy.Energy: double voltage> = 3.0;

        return;
    }
}
